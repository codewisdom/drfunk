  <% div_for @feature do %>
    <%= render :partial => "features/feature" %>
  <% end %>
  <% for scenario in @feature.scenarios.filter(@query) %>
    <% div_for scenario do %>
      <div style="float:right;margin-left:10px;margin-top:8px;width:20px;height:30px;"
            onmouseover="$('scenario_<%=scenario.id%>').addClassName('active')"
            onmouseout="$('scenario_<%=scenario.id%>').removeClassName('active')" >
        <%= image_tag 'arrow_nsew.png', :class => "handle" %>
      </div>
      <div style="float:right;margin-left:10px;margin-top:8px;margin-right:5px;width:40px;height:30px;">
        <% if scenario.steps.length == 0 %>
          <%= link_to_remote('Delete',
                :html => {:class => "small-link delete-link"},
                :url => scenario_path(scenario),
                :method => :delete) %>
        <% end %>
      </div>
        <div style="float:right;width:520px;text-align:left;">
          <%= link_to(truncate(h(scenario.name), {:length => 67}), scenario_steps_path(scenario)) %>
          <br/>
          <span style="color:#999;" class="small-text">
            Updated <%= time_ago_in_words(scenario.updated_at) %> ago.
          <% if !scenario.requirement.nil? && scenario.requirement.length > 0 %>
              (<%= truncate(scenario.requirement, {:length => 53}) %>)
          <% end %>
          </span>
        </div>
        <br/>
    <% end %>
  <% end %>  
  <%= sortable_element "scenario_set_#{@feature.id}",
        :tag => "div",
        :handle => "handle",
        :only => "scenario",
        :scroll => "window", 
        :containment => false, 
        :dropOnEmpty => true,
        :url => update_scenario_order_feature_path(@feature),
        :method => :put %>
